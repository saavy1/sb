controllers:
  main:
    replicas: 1
    containers:
      main:
        image:
          repository: node
          tag: 22-slim
          pullPolicy: IfNotPresent
        command:
          - npx
          - "@infisical/mcp"
          - --transport
          - http
          - --port
          - "8000"
        env:
          INFISICAL_UNIVERSAL_AUTH_CLIENT_ID:
            valueFrom:
              secretKeyRef:
                name: nexus-env
                key: INFISICAL_CLIENT_ID
          INFISICAL_UNIVERSAL_AUTH_CLIENT_SECRET:
            valueFrom:
              secretKeyRef:
                name: nexus-env
                key: INFISICAL_CLIENT_SECRET
          INFISICAL_HOST_URL: http://infisical.infisical.svc.cluster.local:8080
service:
  main:
    controller: main
    ports:
      http:
        port: 8000
